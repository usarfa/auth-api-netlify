(()=>{const t="https://argf.netlify.app/.netlify/functions/api",e='<svg xmlns="http://www.w3.org/2000/svg" fill="#ffc107" viewBox="0 0 16 16" width="16" height="16"><path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path></svg>',n='<svg xmlns="http://www.w3.org/2000/svg" fill="#dc3545" viewBox="0 0 16 16" width="16" height="16"><path d="M11 1.75V3h2.25a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75ZM4.496 6.675l.66 6.6a.25.25 0 0 0 .249.225h5.19a.25.25 0 0 0 .249-.225l.66-6.6a.75.75 0 0 1 1.492.149l-.66 6.6A1.748 1.748 0 0 1 10.595 15h-5.19a1.75 1.75 0 0 1-1.741-1.575l-.66-6.6a.75.75 0 1 1 1.492-.15ZM6.5 1.75V3h3V1.75a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25Z"></path></svg>';function o(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML}function a(t){const e=new Date(t);return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")} ${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()}`}function i(t){return t.replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="_blank">$1 <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-up-left" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M7.364 3.5a.5.5 0 0 1 .5-.5H14.5A1.5 1.5 0 0 1 16 4.5v10a1.5 1.5 0 0 1-1.5 1.5h-10A1.5 1.5 0 0 1 3 14.5V7.864a.5.5 0 1 1 1 0V14.5a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5v-10a.5.5 0 0 0-.5-.5H7.864a.5.5 0 0 1-.5-.5"/>\n  <path fill-rule="evenodd" d="M0 .5A.5.5 0 0 1 .5 0h5a.5.5 0 0 1 0 1H1.707l8.147 8.146a.5.5 0 0 1-.708.708L1 1.707V5.5a.5.5 0 0 1-1 0z"/>\n</svg></a>')}const l=window.innerWidth<=768?3:5;async function d(d=1){try{document.getElementById("loader").style.display="block",document.getElementById("notes-list").style.display="none",document.getElementById("pagination").innerHTML="";const s=(d-1)*l,c=await fetch(`${t}/notes?limit=${l}&offset=${s}`);if(!c.ok)throw new Error("Network response was not ok");const r=await c.json();if(!r.notes||!Array.isArray(r.notes))throw new Error("Invalid data format");!function(t){const l=document.getElementById("notes-list");if(l.innerHTML="",0===t.length)return void(l.innerHTML="<p>Empty</p>");t.forEach((t=>{const d=a(t.timestamp),s=o(t.title),c=i(o(t.description));l.innerHTML+=`\n      <div class="col">\n        <div class="card my-2">\n          <div class="card-body">\n            <h5 class="card-title">${s}</h5>\n            <blockquote>${d}</blockquote>\n            <p class="card-text">${c}</p>\n            <button class="btn btn-outline-primary btn-edit" data-id="${t.id}" data-title="${t.title}" data-description="${t.description}" onclick="openEditModal(this)">\n              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\n                <path d="M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 0 0-.064.108l-.558 1.953 1.953-.558a.253.253 0 0 0 .108-.064Zm1.238-3.763a.25.25 0 0 0-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 0 0 0-.354Z" fill="#0d6efd"></path>\n              </svg>\n            </button>\n            <button class="btn btn-outline-warning btn-copy" onclick="copyDescription(this)">${e}</button>\n            <button class="btn btn-outline-danger btn-delete" data-id="${t.id}" onclick="deleteNoteHandler(this)">${n}</button>\n          </div>\n        </div>\n      </div>\n    `}))}(r.notes),function(t,e){const n=document.getElementById("pagination"),o=Math.ceil(t/l);n.innerHTML=`\n    <nav aria-label="Page navigation example">\n      <ul class="pagination justify-content-center">\n        <li class="page-item text-secondary ${1===e?"disabled":""}">\n          <a class="page-link" href="#" onclick="fetchNotes(${e-1})">\n            <svg xmlns="http://www.w3.org/2000/svg" class="arrow-icon" fill="${1===e?"grey":"white"}" viewBox="0 0 16 16" width="16" height="16"><path d="M9.78 12.78a.75.75 0 0 1-1.06 0L4.47 8.53a.75.75 0 0 1 0-1.06l4.25-4.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L6.06 8l3.72 3.72a.75.75 0 0 1 0 1.06Z"></path></svg>\n          </a>\n        </li>\n        ${Array.from({length:o},((t,n)=>`\n          <li class="page-item ${n+1===e?"active text-underline":""}">\n            <a class="page-link" href="#" onclick="fetchNotes(${n+1})">${n+1}</a>\n          </li>\n        `)).join("")}\n        <li class="page-item ${e===o?"disabled":""}">\n          <a class="page-link" href="#" onclick="fetchNotes(${e+1})">\n            <svg xmlns="http://www.w3.org/2000/svg" class="arrow-icon" fill="${e===o?"grey":"white"}" viewBox="0 0 16 16" width="16" height="16"><path d="M6.22 3.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L9.94 8 6.22 4.28a.75.75 0 0 1 0-1.06Z"></path></svg>\n          </a>\n        </li>\n      </ul>\n    </nav>\n  `}(r.total,d)}catch(t){console.error("Error fetching notes:",t)}finally{document.getElementById("loader").style.display="none",document.getElementById("notes-list").style.display="block"}}let s;document.getElementById("showAddNoteModalBtn").addEventListener("click",(()=>{new bootstrap.Modal(document.getElementById("addNoteModal")).show()})),document.getElementById("addNoteModal").addEventListener("submit",(async function(e){e.preventDefault();const n=document.getElementById("add-note-btn");n.style.display="none";const o=document.getElementById("loader-button");o.style.display="block";const a=document.getElementById("modal-title").value.replace(/\n/g,"<br>"),i=document.getElementById("modal-description").value.replace(/\n/g,"<br>");try{const e=await fetch(`${t}/add-notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:a,description:i})});if(e.ok){document.getElementById("modal-title").value="",document.getElementById("modal-description").value="",d();bootstrap.Modal.getInstance(document.getElementById("addNoteModal")).hide()}else console.error("Error adding note:",e.statusText)}catch(t){console.error("Error adding note:",t)}finally{o.style.display="none",n.style.display="block"}})),document.getElementById("query").addEventListener("input",(function(l){clearTimeout(s);const c=l.target.value.trim();c?s=setTimeout((()=>{!async function(l){try{const d=await fetch(`${t}/search-note?query=${l}`),s=await d.json(),c=document.getElementById("notes-list");c.innerHTML="",s.forEach((t=>{const l=a(t.timestamp),d=o(t.title),s=i(o(t.description));c.innerHTML+=`\n            <div class="col">\n                <div class="card my-2">\n                    <div class="card-body">\n                        <h5 class="card-title">${d}</h5>\n                        <blockquote>${l}</blockquote>\n                        <p class="card-text">${s}</p>\n                        <button class="btn btn-outline-primary btn-edit" data-id="${t.id}" data-title="${t.title}" data-description="${t.description}" onclick="openEditModal(this)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 0 0-.064.108l-.558 1.953 1.953-.558a.253.253 0 0 0 .108-.064Zm1.238-3.763a.25.25 0 0 0-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 0 0 0-.354Z" fill="#0d6efd"></path></svg>\n                      </svg>\n                      </button>\n                        <button class="btn btn-outline-warning btn-copy" onclick="copyDescription(this)">${e}</button>\n                        <button class="btn btn-outline-danger btn-delete" data-id="${t.id}" onclick="deleteNoteHandler(this)">${n}</button>\n                    </div>\n                </div>\n            </div>\n          `}))}catch(t){console.error("Error searching notes:",t)}}(c)}),500):d()})),document.getElementById("edit-note-form").addEventListener("submit",(async function(e){e.preventDefault();const n=document.getElementById("edit-id").value,o=document.getElementById("edit-title").value,a=document.getElementById("edit-description").value;try{const e=await fetch(`${t}/edit-notes/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:o,description:a})});if(e.ok){d();bootstrap.Modal.getInstance(document.getElementById("editNoteModal")).hide()}else console.error("Error editing note:",e.statusText)}catch(t){console.error("Error editing note:",t)}})),document.querySelectorAll(".btn-delete").forEach((e=>{e.addEventListener("click",(()=>{!async function(e){try{const n=e.getAttribute("data-id");if((await Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",textColor:"white",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",background:"#1F2937"})).isConfirmed){console.log(`Deleting note with ID: ${n}`);const e=await fetch(`${t}/delete-notes/${n}`,{method:"DELETE"});if(e.ok)console.log("Note deleted successfully"),d();else{const t=await e.json();console.error("Error deleting note:",t.error)}}}catch(t){console.error("Error deleting note:",t)}}(e.getAttribute("data-id"))}))})),d()})();